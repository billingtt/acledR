<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="acledR">
<title>Deletions API: Keeping your dataset up to date • acledR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Deletions API: Keeping your dataset up to date">
<meta property="og:description" content="acledR">
<meta property="og:image" content="https://acled.github.io/acledR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">acledR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/get_started.html">Get Started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-utilizing-acledr">Utilizing acledR</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-utilizing-acledr">
    <a class="dropdown-item" href="../articles/acled_api.html">ACLED API</a>
    <a class="dropdown-item" href="../articles/acled_update.html">Keeping your Dataset Updated</a>
    <a class="dropdown-item" href="../articles/acled_transformations.html">acledR Data Manipulation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/acled_codebook.html">ACLED Codebook</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/billingtt/acledR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Deletions API: Keeping your dataset up to date</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/billingtt/acledR/blob/HEAD/vignettes/articles/acled_deletions_api.Rmd" class="external-link"><code>vignettes/articles/acled_deletions_api.Rmd</code></a></small>
      <div class="d-none name"><code>acled_deletions_api.Rmd</code></div>
    </div>

    
    
<p>ACLED is a living dataset, which means changes happen regularly.</p>
<p>Three types of changes are recurrent in ACLED’s dataset:</p>
<ul>
<li>New events
<ul>
<li>These are the weekly addition of events, all are published with a
new distinctive <em>event_id_cnty</em>.</li>
</ul>
</li>
<li>Updates of previously published events
<ul>
<li>In some cases we modify published events, as new information may
appear. For example, a particular actor has claimed responsibility over
an attack, or the number of fatalities has changed. In these cases, the
<em>event_id_cnty</em> remains the same, but the new information is
updated and the old information overwritten - including the
<em>timestamp</em>.</li>
</ul>
</li>
<li>Deletion of events
<ul>
<li>In some cases, we have to delete previous events. This happens when
new information surfaces indicating that the event no longer fits the
scope of ACLED’s dataset, or it hints that two events are the same and
the events are then merged. In these cases, the event is removed,
including the <em>event_id_cnty</em>.</li>
</ul>
</li>
</ul>
<p>For users with a personal ACLED file, it is advised to check
regularly which events are no longer in the actual ACLED dataset, and
which have been updated. Otherwise, users risk having an outdated
version. In this section we will walk through how to keep your dataset
updated with the <code>acledR</code> package.</p>
<div class="section level2">
<h2 id="keeping-check-of-updates---acled_update">Keeping check of updates - <code>acled_update()</code><a class="anchor" aria-label="anchor" href="#keeping-check-of-updates---acled_update"></a>
</h2>
<p>As we covered in the more detailed guide about <a href="https://acleddata.com/download/35179/" class="external-link">updating your dataset</a>,
in some cases events are updated. When they are updated, their
<em>event_id_cnty</em> remains the same but all the rest of the
information gets updated and overwritten.</p>
<p>Different from <a href="https://acled.github.io/ACLED-api-guide/deleted_endpoint.html" class="external-link">deleted
events</a>, there is no separate API endpoint to check for updated
events. When events are updated, their timestamp changes to the
timestamp of the update. This means, that you can find the modified
events by utilizing <code><a href="../reference/acled_api.html">acledR::acled_api()</a></code> and providing your
latest timestamp
(i.e. <code>max({your ACLED dataset}$timestamp))</code>) in the
<code>timestamp</code> argument of the function. If you get duplicated
events, these are likely to be updated events, which you should keep
only the one with a higher timestamp.</p>
<p>To simplify this process, <code>acledR</code> includes a function
which makes the update for you by following the steps previously
explained: <code>acled_update</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/acled_update.html">acled_update</a></span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  additional_countries <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  regions <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_types <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  acled_access <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  email <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  key <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  deleted <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  prompts <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>The function is composed of the following arguments: -
<code>df</code>: The dataframe to update, it has to have the same
structure as ACLED’s dyadic dataframes (i.e. the result of
<code><a href="../reference/acled_api.html">acled_api()</a></code>) - <code>start_date</code>: Along with
<code>end_date</code> these determine the temporal range for your
update. They default to the date range of <code>df</code>. -
<code>end_date</code>: Along with <code>start_date</code> these
determine the temporal range for your update. They default to the date
range of <code>df</code>. - <code>countries</code>: In case of your
dataset to include particular countries, you can add them here so that
the function filter new events to those countries. -
<code>regions</code>: In case of your dataset to include particular
regions, you can add them here so that the function filter new events to
those regions. - <code>event_types</code>: In case of your dataset to
include particular event_types, you can add them here so that the
function filter new events to those event_types. -
<code>acled_acess</code>: If you have already utilized
<code>acled_acess()</code>, you can set this option as TRUE (default)
and you wont be required to input email or key. - <code>email</code>:
The email registered in <a href="https://developer.acleddata.com/" class="external-link">ACLED’s Access Portal</a>. Not
required if <code>acled_access = TRUE</code>. - <code>key</code>: The
key registered in <a href="https://developer.acleddata.com/" class="external-link">ACLED’s
Access Portal</a>. Not required if <code>acled_access = TRUE</code>. -
<code>deleted</code>: If TRUE, this function will also deal with deleted
events, utilizing <a href="https://acled.github.io/acledR/articles/acled_deletions_api.html">ACLED
API’s deleted endpoint</a>. - <code>prompts</code>: Use this option to
supress or allow prompts regarding your call. See
<code><a href="../reference/acled_api.html">acled_api()</a></code>.</p>
<p><code><a href="../reference/acled_update.html">acled_update()</a></code> will utilize the dataset you provide to
gather new events based on the timestamp, and add them to the original
dataset, as well as remove any deleted events (if
<code>deleted = TRUE</code>).</p>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>In this section we will show how to use <code>acled_update</code> to
keep your datasets updated.</p>
<p>Load the older dataset:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/billingtt/acledR" class="external-link">acledR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/acled_access.html">acled_access</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"acledexamples@gmail.com"</span>, key <span class="op">=</span> <span class="st">"M3PWwg3DIdhHMuDiilp5"</span><span class="op">)</span> <span class="co">#  This is an example, you will need to input your credentials.</span></span></code></pre></div>
<pre><code><span><span class="co">## Success! Credentials authorized</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">argen_dummy_acled_file</span> <span class="op">&lt;-</span> <span class="fu">acledR</span><span class="fu">::</span><span class="va"><a href="../reference/acled_old_dummy.html">acled_old_dummy</a></span> <span class="co"># Here is our old personal ACLED dataset</span></span></code></pre></div>
<p>When was the last time you gathered your dataset? The snippet below
checks that.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">latest_timestamp_unix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">argen_dummy_acled_file</span><span class="op">$</span><span class="va">timestamp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">latest_timestamp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">latest_timestamp_unix</span><span class="op">)</span> </span></code></pre></div>
<p>The dataset has not been updated since , so you need to update it. To
do so, you just have to utilize <code><a href="../reference/acled_update.html">acled_update()</a></code>. In order to
keep the update within the dates of our dataset, you can ignore the
<code>start_date</code> and <code>end_date</code> arguments. Similarly,
we going to keep <code>deleted=TRUE</code> to also remove deleted
events.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_argen_dataset</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_update.html">acled_update</a></span><span class="op">(</span><span class="va">argen_dummy_acled_file</span>, </span>
<span>                                  additional_countries <span class="op">=</span> <span class="st">"Argentina"</span>, </span>
<span>                                  acled_access <span class="op">=</span> <span class="cn">T</span>, </span>
<span>                                  prompts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## Requesting data for 1 country. Accounting for the requested time period and ACLED coverage dates, this request includes approximately 350 events.</span></span></code></pre>
<pre><code><span><span class="co">## Processing API request</span></span></code></pre>
<pre><code><span><span class="co">## Extracting content from API request</span></span></code></pre>
<pre><code><span><span class="co">## Dataset updated. </span></span>
<span><span class="co">##  Old number of events: 326. </span></span>
<span><span class="co">##  New events: 1. </span></span>
<span><span class="co">##  Deleted events: 0. </span></span>
<span><span class="co">##  Total new &amp; modified events: 67</span></span></code></pre>
<p>Now your dataset captures modified and newly created events.</p>
<p>Best of luck!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lucas Fagliano, Trey Billing, Rachel Goodman, Katayoun Kishi, Michael Start, ACLED.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
