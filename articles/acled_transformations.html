<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="acledR">
<title>Transformation of ACLED data • acledR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Transformation of ACLED data">
<meta property="og:description" content="acledR">
<meta property="og:image" content="https://acled.github.io/acledR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">acledR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/get_started.html">Get Started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-utilizing-acledr">Utilizing acledR</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-utilizing-acledr">
    <a class="dropdown-item" href="../articles/acled_api.html">ACLED API</a>
    <a class="dropdown-item" href="../articles/acled_update.html">Keeping your Dataset Updated</a>
    <a class="dropdown-item" href="../articles/acled_analysis.html">acledR Exploratory Analysis</a>
    <a class="dropdown-item" href="../articles/acled_transformations.html">acledR Data Manipulation</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-acled-codebook">ACLED Codebook</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-acled-codebook">
    <a class="dropdown-item" href="../articles/acled_codebook.html">Overview</a>
    <a class="dropdown-item" href="../articles/event_types.html">Event and Sub-Event Types</a>
    <a class="dropdown-item" href="../articles/actors_interactions.html">Actors and Interactions</a>
    <a class="dropdown-item" href="../articles/time.html">Time</a>
    <a class="dropdown-item" href="../articles/geography.html">Geography</a>
    <a class="dropdown-item" href="../articles/acled_sources.html">Sources</a>
    <a class="dropdown-item" href="../articles/fatalities.html">Fatalities</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/billingtt/acledR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Transformation of ACLED data</h1>
            
            <h4 data-toc-skip class="date">2022-11-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/billingtt/acledR/blob/HEAD/vignettes/articles/acled_transformations.Rmd" class="external-link"><code>vignettes/articles/acled_transformations.Rmd</code></a></small>
      <div class="d-none name"><code>acled_transformations.Rmd</code></div>
    </div>

    
    
<p>The ACLED dataset is designed with user readability in mind. At
times, this focus might conflict with standard clean data principles,
such as having only a single value per column and row. To facilitate a
more programmatic handling of our dataset, we’ve introduced the data
manipulation suite of functions in the <code>acledR</code> package. This
suite of functions enable you to reformat the data structure to adhere
more closely to tidy data conventions.</p>
<div class="section level2">
<h2 id="filter-functions---acled_filter_actor">1. Filter functions - <code>acled_filter_actor()</code><a class="anchor" aria-label="anchor" href="#filter-functions---acled_filter_actor"></a>
</h2>
<p>ACLED data is typically in a wide format, meaning that it can be
somewhat more difficult to filter to specific values because those
values may be spread across multiple columns. For instance, it may take
multiple lines of code to filter to all events involving a particular
actor, because that actor could be included in several different columns
(i.e. <em>actor1</em>, <em>actor 2</em>, <em>assoc_actor_1</em> and
<em>assoc_actor_2</em>).</p>
<p>To make filtering across multiple columns easier, <code>acledR</code>
includes the function <code>acled_filter_actor()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acled_filter_actors</span>(df,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                                      actors, </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">filter_cols=</span>‘all’)</span></code></pre></div>
<p>The function is relatively straightforward and includes only three
arguments:</p>
<ul>
<li>
<code>df</code>: a dataset that corresponds to ACLED’s column
structure,</li>
<li>
<code>actors</code>: a character vector of the actors to which you
are interested in filtering,</li>
<li>
<code>filter_cols</code>: a character vector of the columns used for
filtering.</li>
</ul>
<p>For <code>filter_cols</code>, you can utilize a vector with the names
of the different actor columns, such as
<code>filter_cols = c(“actor1”,”actor2”)</code>’. If you leave this
argument blank, the default is to filter by all actor columns in the
dataframe.</p>
<p><strong>Note:</strong> that if you use the option
<code>filter_cols = ‘all'</code>, the <code>df</code> you provide must
follow the structure of ACLED’s data and thus include
<em>assoc_actor_1</em> or <em>assoc_actor_2</em> columns.</p>
</div>
<div class="section level2">
<h2 id="from-wide-to-long---acled_transform">2. From wide to long - <code>acled_transform()</code><a class="anchor" aria-label="anchor" href="#from-wide-to-long---acled_transform"></a>
</h2>
<p>The other data manipulation function is
<code><a href="../reference/acled_transform.html">acled_transform()</a></code> which will allow you to switch between
wide and long formats without the need to make a new API call. Typical
ACLED data is in a wide format, with multiple actors represented in each
row, and those actors interacting during an event (see our <a href="https://acled.github.io/ACLED-api-guide/acled_endpoint.html#dyadic-versus-monadic-formats---export_type" class="external-link">API
interactive guide</a> for a more detailed explanation). However, you may
wish to conduct actor-based analyses that are better suited to a long
data format where each actor has a separate row, and a single event may
therefore be represented in multiple rows.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/acled_transform.html">acled_transform</a></span><span class="op">(</span><span class="va">data</span>, </span>
<span>                type <span class="op">=</span> <span class="st">"full_actors"</span><span class="op">)</span> </span></code></pre></div>
<p><code><a href="../reference/acled_transform.html">acled_transform()</a></code> requires two arguments:</p>
<ul>
<li><p><code>data</code>: The dataset to transform (must follow ACLED’s
structure[a])</p></li>
<li><p><code>type</code>: A character vector indicating which columns to
transpose (the columns that go from wide to long format).</p></li>
</ul>
<p>The available column options upon which ACLED data can be transposed,
as indicated in the <code>type</code> argument are:</p>
<ol style="list-style-type: decimal">
<li><p><code>full_actor</code>: Transposes all the actor columns in the
dataset (<em>actor1</em>, <em>actor2</em>, <em>assoc_actor_1</em>,
<em>assoc_actor_2</em>). There will be a separate row for each actor or
associate actor involved in each event.</p></li>
<li><p><code>main_actors</code>: Transposes only <em>actor1</em> and
<em>actor2</em>. There will be separate rows for main actors
only.</p></li>
<li><p><code>assoc_actors</code>: Transposes only <em>assoc_actor_1</em>
and <em>assoc_actor_2</em> columns. There will be separate rows for
associate actors only.</p></li>
<li><p><code>source</code>: Transposes only the <em>source</em> column.
There will be a separate row for each source in the source
column.</p></li>
</ol>
<p>Keep in mind that you can receive some of these data formats directly
from ACLED’s API, but that using this function can provide some added
benefits:</p>
<ul>
<li><p>You can use this function to transform a dyadic dataset to a
monadic dataset, thus receiving the latter without executing an
additional API call.</p></li>
<li><p>You have more control over the columns used to go from wide to
long format. This function allows you to transpose on the following
columns: <em>actor1 &amp; actor2</em>, <em>assoc_actor_1</em>,
<em>assoc_actor_2</em>, and <em>source</em>. The API only allows you to
receive long-format data based on <em>actor1</em> &amp;
<em>actor2</em>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>In this section we will walkthrough a potential use case for the
transformation functions to explain how users can take advantage of
these.</p>
<p>For this example, assume that you want data of South America
throughout the first half of 2023.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/billingtt/acledR" class="external-link">acledR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/acled_access.html">acled_access</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"acledexamples@gmail.com"</span>, key <span class="op">=</span> <span class="st">"M3PWwg3DIdhHMuDiilp5"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## Success! Credentials authorized</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_sa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>regions <span class="op">=</span> <span class="st">"South America"</span>,</span>
<span>                   start_date <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span>
<span>                   end_date <span class="op">=</span> <span class="st">"2023-06-01"</span>,</span>
<span>                   monadic <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                   acled_access <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                   prompt <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Requesting data for 15 countries. Accounting for the requested time period and ACLED coverage dates, this request includes 2,265 country-days.</span></span></code></pre>
<pre><code><span><span class="co">## Proceeding with 1 API calls</span></span></code></pre>
<pre><code><span><span class="co">## Processing API request</span></span></code></pre>
<pre><code><span><span class="co">## Extracting content from API request</span></span></code></pre>
<p>Now, filter to spot events of the “Military Forces of Colombia
(2022-)”.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mil_colombia</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_filter_actors.html">acled_filter_actors</a></span><span class="op">(</span><span class="va">df_sa</span>,<span class="st">"Military Forces of Colombia (2022-)"</span>, filter_cols <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></code></pre></div>
<p>In the filter events there are 143 rows, meaning 143 events where the
“Military Forces of Colombia (2022-)” participated. However, if you take
a look more closely, the actor of interest is not only in the main
columns (i.e, “COL20021”).</p>
<p>Assume now that you want to count how many events does each actor
participates in. The problem is that for doing that, you would need to
sum all the times the actor appears in the four columns. That, while
possible, is unnecessarily complicated when you can transform your
dataset into long form, where each actor is spread across rows rather
than columns. For that, you can use <code><a href="../reference/acled_transform.html">acled_transform()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_sa_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_transform.html">acled_transform</a></span><span class="op">(</span><span class="va">df_sa</span>, type <span class="op">=</span> <span class="st">"full_actors"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Be aware, inter1 and inter2 represent the actor type of actor1 and actor2 respectively.</span></span></code></pre>
<p>The dataset is now into long form, so you are left with groupping by
actor, and counting by <strong>unique</strong> <em>event_id_cnty</em>.
It is very important to count by unique ids, because when transforming
data to long, we duplicate events, creating rows per event equivalent to
the number of actors involved.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">actors_df_sa</span> <span class="op">&lt;-</span> <span class="va">df_sa_long</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">actor</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_events <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">event_id_cnty</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To verify your results, filter the actor counts to only “Military
Forces of Colombia (2022-)”.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">actors_df_sa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">actor</span> <span class="op">==</span> <span class="st">"Military Forces of Colombia (2022-)"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="va">.</span><span class="op">$</span><span class="va">n_events</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 146</span></span></code></pre>
<p>The number of events matches the number of rows you got after using
<code><a href="../reference/acled_filter_actors.html">acled_filter_actors()</a></code>, meaning that you effectively
captured the number of events by each actor.</p>
<p>This highlights the advantage of both
<code>acled_filter_actors</code> and <code>acled_transform</code>, which
allows you to easily manipulate ACLED column structure to better fit
programmatical approaches of analysis.</p>
<p>[a]<span class="citation">@m.start</span><span class="citation">@acleddata.com</span>: I think we need to clarify what
this means. Does it mean it needs ALL the columns from the full acled
dataset? If so we should probably mention that in the API guide (in the
choosing columns section).</p>
<p>Lucas: I would have assumed that by writing like this, it means that
it needs ALL.</p>
<p>Tho, not sure about the API guide part. Because if you are using the
package, I doubt you will use the API, and vice versa.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Trey Billing, Lucas Fagliano, Rachel Goodman, Katayoun Kishi, Michael Start, ACLED.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
