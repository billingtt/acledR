---
title: "Untitled"
output: html_document
date: "2022-11-11"
---
library(knitr)
library(acledR)
library(dplyr)
```


# Transformation of ACLED data


## 1. Filter functions

ACLED’s data utilizes a wide-format, which while it is an easier format for humans to read, it is not the same case for computer. For that matter, sometimes it can take a couple of lines of code to properly filter data in ACLED when we are trying to variables inside the wide-formatted columns such as actor 1 , actor 2, assoc actors, and sources.

Because of that, `acledR` includes two particular functions made to easily filter the data across all of these columns, while remaining the same structure. 

### 1.1. acled_filter_actor()

The actor columns are a prime example of those extra steps users would have to make to actually filter their data to one or multiple actors. That is because actors could be found across four different columns, requires using either multiple filters, or multiple conditions, making it slightly tedious to write. 

Thus, the package includes the ‘acled_filter_actor()’ function, which filters the data to the desired actors. 

The function is structured as follows:

 ```{r, eval = FALSE}

acled_filter_action(df,
		    	actors, 
			filter_cols=‘all’)

```

The function is relatively straight forward, taking three arguments: ‘df’ which is the dataset of interest, ‘actors’ which is a character vector of the actors which we are interested in filtering, and ‘filter_cols’ which is a character vector of the columns to be filtered. 

For filter_cols we can utilize a vector with the names of the different actor columns, like ‘filter_cols = c(“actor1”,”actor2”)’, or we leave it blank which defaults in filtering in all columns. Please note that if we utilize the option ‘filter_cols = ‘all’,  the ‘df’ to be provided has to follow ACLED’s structure, and thus have an assoc_actor_1 or assoc_actor_2 column, 

The function returns a dataset which look like the original dataset, but with the data filtered. 

### 1.2 acled_filter_categories.

As users may find in ACLED’s methodology, we have defined clusters of events types that tend to describe specific categories of political violence or disorder. These are:

[chunck with table of categories and the event types that include them]

```{r table_of_categories}

Table_of_categories <- data.frame(categories = c(“political violence”,”organized_political_violence”,”disorder”,”demostrations”),
Conditions = c(“


```



The table helps illustrates the conditional statements that lead to these categories, however, it also highlights how tedious it may be to actually filter these categories manually. For that reason, we have included in the package a function to be able to directly observe these categories. This is very useful when users want to recreate things like regional overviews, which actually make use of these categories. This is how the function looks :

[chunck of code with the function]


‘acled_filter_categories()’ requires three arguments. First, is ‘data’ which corresponds to the ACLED’s data frame, like the result from ‘acled_api()’. Second, is ‘acled_categories’ which is a character vector of the categories of interests by which we will filter. Finally, it includes  ‘keep_all_events’ option, which is mean to be a logical statement. When we se indicate ‘keep_all_events = FALSE’ we are telling the function to return only the events within the requested categories. On the contrary, if it is ‘TRUE’, then the return data frame will include new columns to indicate if the given event was part of the specified category. 


## 2. acled_transform()

(Just get it from the acled_transform vignette) 


## acledR Example

[the example in the acled_transform vignette, but added the other two filter functions]
