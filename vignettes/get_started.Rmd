---
title: "Get Started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get Started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
knitr::include_graphics("workflow.png")
```

``` {r, echo=FALSE,include = FALSE}
library(acledR)
library(dplyr)
```

Welcome! 

In this vignette you are going to get a brief explanation on how the package works and how to get started with its core functions. Aside from this walkthrough, you are going to be able to find more detailed explanations and examples under the ACLED Codebook Tab and Articles tab. Alternatively, for metholodgy-related questions, please visit [ACLED's Knowledge Base](https://acleddata.com/knowledge-base/). 

Naturally, the first step is loading installing the package:

```{r, eval=FALSE}

# Installing the package
install.packages("acledR") # To install the package from CRAN

devtools::install_github("ACLED/acledR") # To install the developer's branch from Github. 

# Loading the package
library(acledR)
```


The main objective of this package is to allow R users easier access to ACLED data by providing a wrapper to submit GET requests to the ACLED's API, as well as other functions to manipulate ACLED data. 

This means users can request data through a more acccesible approach rather than utilizing lengthy and often comboluted API calls. The general workflow for which this package was designed was as follows:

![Authenticate your API credentials. Request data from ACLED API. Transform data received from the API. Generate initial analysis from the data.](workflow.png)

This vignette will follow the same general layout. 

## Authenticating your credentials - `acled_update()`

To be able to access the API, you require an API key. If you are not registered in ACLED's Access portal, you can visit it [here](developer.acleddata.com). If you would like a detail guide on how to create your account and get your API, you can utilize [ACLED's Access Guide](https://acleddata.com/download/35300/). 
 
Once you are registered, we encourage you to save your credentials and authenticate them through `acled_access()`. This function allows you to test that your credentials are working as intended, and save them into your enviorment, which in turn allows users to avoid having to input the credentials every time there is a request to the API. 

```{r}
acled_access(email = "acledexamples@gmail.com", key = "M3PWwg3DIdhHMuDiilp5") #  This is an example, you will need to input your credentials.
```

If the authentication was successful, you will find a message in the console stating "Authorization accepted". 

## Requesting data from ACLED API - `acled_api()`

Once the credentials are authenticated, users can easily start requesting data from the API. To do so, you can use the `acled_api()` function. The function requires the fields for which to gather the data from. Thus, in the example below we are going to request data from Argentina throughout 2022. 

```{r}
argentinian_data <- acled_api(countries = "Argentina", start_date="2022-01-01",end_date = "2022-12-31", prompt=F)
```

While in our example we utilized only three arguments (`countries`, `start_date` and `end_date`), `acled_api()` features a number of other arguments such as regions, timestamp, event_types, and more. You can find more in `vignette("acled_api")`.

Additionally, due to the fact that we authenticated our credentials before, we are not required to input these into the function. Otherwise, if we didn't utilize `acled_access()` we would be required to input our email and key. 

Finally, acled_api allows you to gather vast amounts of data from the API, however, to make these big calls of data, we need to segment these calls into multiple smaller ones. Thus, the function includes a `prompt` parameter which is set to `TRUE` (default). When `TRUE`, you will receive a message with the number of API requests that this will require (an important aspect to consider if you have a limited number of calls), and a confirmation message if you want to request data. Alternatively, when it is marked as `FALSE`, you will not receive the prompt and execute the required number of API requests

The data you receive will be a data frame of the events throughout the request dates and the requested region/country. We can inspect the Argentinian data we gathered now. 

```{r, echo=F}
glimpse(argentinian_data)
```


## Updating ACLED Data - `acled_update()`

To ensure your ACLED dataset remains current and accurate, regular updates are essential. The acledR package facilitates this process with the `acled_update()` function. `acled_update()` is designed to handle the intricacies of updating your ACLED dataset, accounting for new events, modifications to existing events, and deletions.

For utilizing `acled_update`, you must provide it the old dataset to update. There other options that you can also utilize, which are mostly aimed at giving you options on how to update the dataset. You can find more information in `vignette("acled_update")

Here is an example of how to use `acled_update()` to update an old dataset:

```{r}
new_data <- acled_update(acledR::acled_old_deletion_dummy, prompts = F)
```

## Transforming ACLED Data - `acled_transform_*`

The `acledR` package provides a suite of functions to manipulate and transform ACLED data, these may aid you on simplifying part of the transformations required for your desired analysis. You can visit all the information obout our transformation functions in vignette("acled_transformations").

### 1. Converting Interaction Codes - `acled_transform_interaction()`

The `acled_transform_interaction()` function allows you to convert between numeric and text interaction codes, facilitating easier interpretation and analysis of ACLED data. The function requires your ACLED dataset and an optional boolean argument `only_inters`, which determines whether to include only `inter1` and `inter2` columns or also the `interaction` column in the output. By default, `only_inters` is set to `FALSE`.

```{r}
transformed_data <- acled_transform_interaction(argentinian_data)

# Note the inter1 and inter2 columns
head(transformed_data)
```

### 2. Reshaping Data: Wide to Long Format - `acled_transform_longer()`

The `acled_transform_longer()` function transforms ACLED data from a wide format, where multiple actors are represented in each row, to a long format, with separate rows for each actor. This is particularly useful for actor-based analyses.

```{r}
long_data <- acled_transform_longer(argentinian_data, type = "full_actors")

head(long_data)
```

You can specify the type of transformation using the type argument, choosing from `full_actors`, `main_actors`, `assoc_actors`, or `source`. This function provides flexibility and control over the transformation process, allowing you to tailor the data structure to your specific needs.

### 3. Reshaping Data: Long to Wide Format - `acled_transform_wider()`

Conversely, the `acled_transform_wider()` function enables you to pivot your data back to a wide format, useful if you have previously used `acled_transform_longer()` and wish to revert to the original data structure.

```{r}
wide_data <- acled_transform_wider(long_data, type = "full_actors")

head(wide_data)
```

Like its counterpart, this function requires the data and type arguments, ensuring consistency and ease of use across the transformation functions.

----

Now your dataset should be ready for you to analyse! Remember to always consult [ACLED's Methodology](https://acleddata.com/resources/) when analysing to get a better understanding of our dataset. 
