<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="acledR">
<title>acledR_examples • acledR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="acledR_examples">
<meta property="og:description" content="acledR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">acledR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/acledR_examples.html">acledR_examples</a>
    <a class="dropdown-item" href="../articles/acled_api.html">ACLED API</a>
    <a class="dropdown-item" href="../articles/generate_counts.html">Generate Event Counts</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/billingtt/acledR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>acledR_examples</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/billingtt/acledR/blob/HEAD/vignettes/acledR_examples.Rmd" class="external-link"><code>vignettes/acledR_examples.Rmd</code></a></small>
      <div class="d-none name"><code>acledR_examples.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="acled_api">
<code>acled_api()</code><a class="anchor" aria-label="anchor" href="#acled_api"></a>
</h2>
<p><code><a href="../reference/acled_api.html">acled_api()</a></code> is a wrapper to request and process ACLED API calls. The function takes the following parameters:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>
  <span class="va">email</span>,
  <span class="va">key</span>,
  countries <span class="op">=</span> <span class="cn">NULL</span>,
  regions <span class="op">=</span> <span class="cn">NULL</span>,
  start_date <span class="op">=</span> <span class="cn">NULL</span>,
  end_date <span class="op">=</span> <span class="cn">NULL</span>,
  monadic <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
<p>The email and key must be those associated with your ACLED account registered at developer.acleddata.com. These can be passed as character strings, though I recommend storing them as an environmental variable so you can call them without pasting every session (and for security resons). To do so, run:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/file.edit.html" class="external-link">file.edit</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="st">".Renviron"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>which will open your <code>.Renviron</code> file. Once there, set:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>email_address<span class="op">=</span><span class="st">"YourEmail"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>acled_key<span class="op">=</span><span class="st">"YourKey"</span><span class="op">)</span></code></pre></div>
<p>and save the file. Now, if you run <code>Sys.getenv("email_address")</code>, your associated email will print; if you run <code>Sys.getenv("acled_key")</code>, your ACLED key will print.</p>
<p>The <code>countries</code> and <code>regions</code> parameters specify where in the world to pull data from. If both are NULL (the default), the API will return data for all countries available. Specific countries may be requested via a vector of country names. Similarly, entire regions may be requested via a vector of region names or numeric codes. <code>acledR::acled_countries</code> and <code>acledR::acled_regions</code> shows the full lists of countries and regions available. If you specify both countries and regions, the call will return only cases that fit both arguments. For example, if you request <code>countries = c("Nigeria", "Mexico")</code> and <code>regions = c("Western Africa")</code>, only Nigeria will be returned since Mexico is not in Western Africa.</p>
<p>The <code>start_date</code> and <code>end_date</code> parameters specify the time period requested in “yyyy-mm-dd” format. If NULL, all available time periods available will be returned. If either start or end date is NULL, both must be NULL or an error is returned.</p>
<p><code>monadic</code> is a logical parameter, which is FALSE by default and returns the dyadic version of the data. If set TRUE, the monadic version will be returned.</p>
<p>To see how this works in practice, here’s an example calling just Brazil since January 2022. Note that I call my email and key directly with <code><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv()</a></code> rather than pasting.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/billingtt/acledR" class="external-link">acledR</a></span><span class="op">)</span>
<span class="va">df_br</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>email <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"email_address"</span><span class="op">)</span>,
                key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"acled_key"</span><span class="op">)</span>,
                countries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brazil"</span><span class="op">)</span>,
                start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,
                end_date <span class="op">=</span> <span class="st">"2022-05-09"</span>,
                monadic <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
<p>If instead, we wanted multiple countries, we could do:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_br_co</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>email <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"email_address"</span><span class="op">)</span>,
                key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"acled_key"</span><span class="op">)</span>,
                countries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Brazil"</span>, <span class="st">"Colombia"</span><span class="op">)</span>,
                start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,
                end_date <span class="op">=</span> <span class="st">"2022-05-09"</span>,
                monadic <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
<p>Or an entire region:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acled_api.html">acled_api</a></span><span class="op">(</span>email <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"email_address"</span><span class="op">)</span>,
                key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"acled_key"</span><span class="op">)</span>,
                regions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"South America"</span><span class="op">)</span>,
                start_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,
                end_date <span class="op">=</span> <span class="st">"2022-04-30"</span>,
                monadic <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="generate_counts">
<code>generate_counts()</code><a class="anchor" aria-label="anchor" href="#generate_counts"></a>
</h2>
<p>The <code><a href="../reference/generate_counts.html">generate_counts()</a></code> function quickly creates event counts by event type and unit of analysis.</p>
<p>In the most basic usage, the required arguments are:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span>
  <span class="va">data</span>,
  <span class="va">unit_id</span>,
  <span class="va">time_id</span>,
  <span class="va">time_target</span>
  <span class="op">)</span></code></pre></div>
<p>where <code>data</code> is ACLED event-level data, <code>unit_id</code> is the spatial unit of analysis (e.g., country, ADMIN1), <code>time_id</code> is the temporal unit (i.e., <code>event_date</code> normally), and <code>time_target</code> is the temporal unit of aggregations (e.g., week, month, year). If <code>time_target = week</code>, it automatically uses the ACLED week (starting on Saturday).</p>
<p>As an example, we can take the data for South America we just pulled and generate weekly counts.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg</span> <span class="op">&lt;-</span>
  <span class="va">df_sa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span><span class="va">.</span>, unit_id <span class="op">=</span> <span class="st">"country"</span>, 
                  time_id <span class="op">=</span> <span class="st">"event_date"</span>,
                  time_target <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></code></pre></div>
<p>This returns a tibble with columns for each event type in the data, as well as a column for the total events:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
event_week
</th>
<th style="text-align:right;">
protests
</th>
<th style="text-align:right;">
riots
</th>
<th style="text-align:right;">
strategic_developments
</th>
<th style="text-align:right;">
violence_against_civilians
</th>
<th style="text-align:right;">
battles
</th>
<th style="text-align:right;">
explosions_remote_violence
</th>
<th style="text-align:right;">
na
</th>
<th style="text-align:right;">
total_events
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-01
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
24
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-08
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-15
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
48
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-22
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
32
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-29
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
33
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-05
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
34
</td>
</tr>
</tbody>
</table>
<p>We can also request just certain event types. For example, we might only want political violence:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg</span> <span class="op">&lt;-</span>
  <span class="va">df_sa</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_counts.html">generate_counts</a></span><span class="op">(</span><span class="va">.</span>, unit_id <span class="op">=</span> <span class="st">"country"</span>, 
                  time_id <span class="op">=</span> <span class="st">"event_date"</span>,
                  time_target <span class="op">=</span> <span class="st">"week"</span>,
                  event_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Battles'</span>, <span class="st">'Violence against civilians'</span>, 
                           <span class="st">'Explosions/Remote violence'</span>, <span class="st">'Riots'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>And now we only retain the requested event typesn and the total corresponds to these types only</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
event_week
</th>
<th style="text-align:right;">
riots
</th>
<th style="text-align:right;">
violence_against_civilians
</th>
<th style="text-align:right;">
battles
</th>
<th style="text-align:right;">
explosions_remote_violence
</th>
<th style="text-align:right;">
na
</th>
<th style="text-align:right;">
total_events
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-01
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-08
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-15
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-22
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
5
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-29
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-05
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="generate_movers">
<code>generate_movers()</code><a class="anchor" aria-label="anchor" href="#generate_movers"></a>
</h2>
<p>The <code><a href="../reference/generate_movers.html">generate_movers()</a></code> function calculations moving statistics over some time period. The required parameters are:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/generate_movers.html">generate_movers</a></span><span class="op">(</span>
  <span class="va">data</span>,
  <span class="va">var</span>,
  <span class="va">unit_id</span>,
  <span class="va">time_id</span>,
  <span class="va">slide_funs</span>,
  <span class="va">slide_periods</span>
<span class="op">)</span></code></pre></div>
<p>In this example, I ask for the moving mean and standard deviation of <code>total_events</code> looking back 4 weeks and 8 weeks.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg</span> <span class="op">&lt;-</span> 
  <span class="va">df_sa_agg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/generate_movers.html">generate_movers</a></span><span class="op">(</span><span class="va">.</span>, 
                  var <span class="op">=</span> <span class="st">"total_events"</span>,
                  unit_id <span class="op">=</span> <span class="st">"country"</span>,
                  time_id <span class="op">=</span> <span class="st">"event_week"</span>,
                  slide_funs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"sd"</span><span class="op">)</span>,
                  slide_periods <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The new moving variables are then appended to the existing data with names indicating that it’s a moving stat, the function name, and the number of periods. Note that the first 4 weeks for the 4 week moving stats and first 8 weeks for the 8 week moving stats are missing because there are not enough weeks to fill the requested time horizon yet. This is the default behavior but can be turned off if you set <code>complete=F</code>. In that case, the moving stats will start to fill in the second period, even though has not been enough lead time given the requested window. In this example, <code>moving_mean_4</code> for in Argentina would be 24 (the “average” of the previous periods, but only one prior period) and the third period would be (24 + 21) / 2 = 22.5.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_sa_agg</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">event_week</span>, <span class="va">total_events</span><span class="op">:</span><span class="va">moving_sd_8</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">kableExtra</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
event_week
</th>
<th style="text-align:right;">
total_events
</th>
<th style="text-align:right;">
moving_mean_4
</th>
<th style="text-align:right;">
moving_mean_8
</th>
<th style="text-align:right;">
moving_sd_4
</th>
<th style="text-align:right;">
moving_sd_8
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-01
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-08
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-15
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-22
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-01-29
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3.75
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1.5000000
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-05
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3.75
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1.5000000
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-12
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3.75
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1.5000000
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-19
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3.25
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
1.2583057
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-02-26
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2.50
</td>
<td style="text-align:right;">
3.125
</td>
<td style="text-align:right;">
0.5773503
</td>
<td style="text-align:right;">
1.246423
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2022-03-05
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
2.875
</td>
<td style="text-align:right;">
0.8164966
</td>
<td style="text-align:right;">
1.457738
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="calculate_actors_index">
<code>calculate_actors_index()</code><a class="anchor" aria-label="anchor" href="#calculate_actors_index"></a>
</h2>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Trey Billing.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
